# ğŸ¦ Nitter Scraper V2 - Documentation ComplÃ¨te

## ğŸ“‹ Vue d'ensemble

Nitter Scraper V2 est un package TypeScript puissant permettant de rÃ©cupÃ©rer des tweets depuis Nitter sans authentification. Cette version amÃ©liorÃ©e ajoute le support des proxies, l'extraction de mÃ©dias (images/vidÃ©os), les cartes de prÃ©visualisation et bien plus encore !

## âœ¨ FonctionnalitÃ©s principales

- ğŸš€ **Scraping sans authentification** - Aucune clÃ© API Twitter nÃ©cessaire
- ğŸ”„ **Gestion automatique de la pagination** - RÃ©cupÃ¨re plusieurs pages automatiquement
- ğŸ›¡ï¸ **Protection contre la limitation de dÃ©bit** - DÃ©lais intelligents entre les requÃªtes
- ğŸŒ **Support proxy avancÃ©** - Trois modes : sans proxy, liste personnalisÃ©e, ou URL de tÃ©lÃ©chargement
- ğŸ“· **Extraction de mÃ©dias** - Images, vidÃ©os et cartes de prÃ©visualisation
- ğŸ‘¤ **Informations utilisateur** - Avatar et mÃ©tadonnÃ©es
- ğŸ”§ **TypeScript natif** - Typages complets et intellisense
- âš¡ **Performance optimisÃ©e** - Gestion d'erreurs et retry automatique

## ğŸ“¦ Installation

### Installation comme bibliothÃ¨que
```bash
npm install nitter-scraper-v2
```

### Installation globale pour utilisation CLI
```bash
npm install -g nitter-scraper-v2
```

### Avec Bun (recommandÃ© pour le dÃ©veloppement)
```bash
bun install nitter-scraper-v2
```

## ğŸš€ DÃ©marrage rapide

### Utilisation comme bibliothÃ¨que

```typescript
import { fetchTweets } from "nitter-scraper-v2";

async function main() {
  const tweets = await fetchTweets("elonmusk", 3);
  console.log(`TrouvÃ© ${tweets.length} tweets`);

  tweets.forEach((tweet) => {
    console.log(`${tweet.username}: ${tweet.text}`);
    if (tweet.imageTweet.length > 0) {
      console.log(`ğŸ“· Images: ${tweet.imageTweet.length}`);
    }
    if (tweet.videoTweet.length > 0) {
      console.log(`ğŸ¥ VidÃ©os: ${tweet.videoTweet.length}`);
    }
  });
}

main().catch(console.error);
```

### Utilisation comme outil CLI

```bash
# Lancer le scraper avec Bun
bun run cli

# Ou si installÃ© globalement
nitter-scraper-v2
```

## ğŸ“š API complÃ¨te

### Fonction fetchTweets

```typescript
function fetchTweets(
  username: string,
  maxPages?: number,
  useProxies?: boolean,
  proxyOptions?: ProxyOptions
): Promise<Tweet[]>;
```

#### ParamÃ¨tres

| ParamÃ¨tre      | Type           | DÃ©faut       | Description                            |
| -------------- | -------------- | ------------ | -------------------------------------- |
| `username`     | `string`       | **requis**   | Nom d'utilisateur Twitter (sans @)    |
| `maxPages`     | `number`       | `3`          | Nombre maximum de pages Ã  rÃ©cupÃ©rer    |
| `useProxies`   | `boolean`      | `false`      | Activer l'utilisation de proxies      |
| `proxyOptions` | `ProxyOptions` | `undefined`  | Options de configuration des proxies   |

## ğŸŒ Gestion des proxies

Cette version offre trois modes de gestion des proxies :

### 1. Sans proxy (par dÃ©faut)

```typescript
const tweets = await fetchTweets("username", 3, false);
```

### 2. Liste de proxies personnalisÃ©e

```typescript
import { fetchTweets, ProxyOptions } from "nitter-scraper-v2";

const proxyOptions: ProxyOptions = {
  proxyList: [
    "192.168.1.1:8080:user1:pass1",
    "192.168.1.2:8080:user2:pass2",
    "192.168.1.3:8080:user3:pass3",
  ],
};

const tweets = await fetchTweets("username", 3, true, proxyOptions);
```

### 3. URL de tÃ©lÃ©chargement de proxies

```typescript
const proxyOptions: ProxyOptions = {
  proxyUrl: "https://votre-serveur.com/proxies.txt",
};

const tweets = await fetchTweets("username", 3, true, proxyOptions);
```

### 4. URL Webshare.io par dÃ©faut

```typescript
// Utilise l'URL Webshare.io configurÃ©e par dÃ©faut
const tweets = await fetchTweets("username", 3, true);
```

## ğŸ“ Types TypeScript

### Interface Tweet

```typescript
interface Tweet {
  id: string;                 // ID unique du tweet
  text: string;              // Contenu textuel du tweet
  username: string;          // Nom d'utilisateur de l'auteur
  created_at: string;        // Date de crÃ©ation (chaÃ®ne ISO)
  timestamp: number | null;  // Timestamp Unix (millisecondes)
  imageTweet: string[];      // URLs des images attachÃ©es
  videoTweet: string[];      // URLs des vidÃ©os attachÃ©es
  avatarUrl: string | null;  // URL de l'avatar utilisateur
  cards: Card[];             // Cartes de prÃ©visualisation
  originalUrl: string;       // URL originale du tweet sur Twitter/X
}
```

### Interface ProxyOptions

```typescript
export type ProxyOptions = {
  proxyList?: string[];  // Liste de proxies au format "host:port:username:password"
  proxyUrl?: string;     // URL pour tÃ©lÃ©charger la liste de proxies
};
```

### Interface Card

```typescript
interface Card {
  type: "card";              // Type de carte
  url: string | null;        // URL de destination
  imageUrl: string | null;   // URL de l'image de prÃ©visualisation
  title: string;             // Titre de la carte
  description: string;       // Description de la carte
  destination: string;       // Domaine de destination
}
```

## ğŸ”§ Configuration avancÃ©e

### Format des proxies

Les proxies doivent Ãªtre au format : `host:port:username:password`

Exemple :
```
proxy1.example.com:8080:monuser:monpass
192.168.1.100:3128:admin:secret123
proxy-server.net:1080:client:password
```

## ğŸ“ Structure du projet

```
nitter-scraper-v2/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ index.ts          # Point d'entrÃ©e principal
â”‚   â”œâ”€â”€ scraper.ts        # Logique de scraping principale
â”‚   â”œâ”€â”€ utils/            # Utilitaires
â”‚   â””â”€â”€ types/            # DÃ©finitions de types
â”œâ”€â”€ dist/                 # Code compilÃ©
â”œâ”€â”€ examples/             # Exemples d'utilisation
â”œâ”€â”€ package.json          # Configuration du package
â””â”€â”€ README.md            # Documentation principale
```

## ğŸ’¡ Exemples d'utilisation

### Exemple basique

```typescript
import { fetchTweets } from "nitter-scraper-v2";

// RÃ©cupÃ©rer les 5 derniers tweets d'un utilisateur
const tweets = await fetchTweets("username", 5);
console.log(tweets);
```

### Exemple avec proxies

```typescript
import { fetchTweets } from "nitter-scraper-v2";

const proxyOptions = {
  proxyList: [
    "proxy1.com:8080:user:pass",
    "proxy2.com:8080:user:pass"
  ]
};

const tweets = await fetchTweets("username", 3, true, proxyOptions);
```

### Exemple d'extraction de mÃ©dias

```typescript
import { fetchTweets } from "nitter-scraper-v2";

const tweets = await fetchTweets("username", 2);

tweets.forEach(tweet => {
  console.log(`Tweet: ${tweet.text}`);
  
  // Afficher les images
  if (tweet.imageTweet.length > 0) {
    console.log('Images trouvÃ©es:');
    tweet.imageTweet.forEach(img => console.log(`- ${img}`));
  }
  
  // Afficher les vidÃ©os
  if (tweet.videoTweet.length > 0) {
    console.log('VidÃ©os trouvÃ©es:');
    tweet.videoTweet.forEach(video => console.log(`- ${video}`));
  }
  
  // Afficher les cartes de prÃ©visualisation
  if (tweet.cards.length > 0) {
    console.log('Cartes de prÃ©visualisation:');
    tweet.cards.forEach(card => {
      console.log(`- ${card.title}: ${card.description}`);
    });
  }
});
```

## ğŸ› ï¸ Scripts disponibles

Dans le fichier `package.json`, plusieurs scripts sont disponibles :

- `npm run build` : Compile le TypeScript vers JavaScript
- `npm run start` : Lance l'application avec Bun
- `npm run cli` : Lance l'interface CLI avec Bun
- `npm run prepare` : PrÃ©pare le package (compile automatiquement)

## ğŸ“‹ DÃ©pendances

### DÃ©pendances principales
- `axios` : Client HTTP pour les requÃªtes
- `cheerio` : Parser HTML/DOM cÃ´tÃ© serveur
- `http-proxy-agent` & `https-proxy-agent` : Support des proxies HTTP/HTTPS
- `socks-proxy-agent` : Support des proxies SOCKS
- `react-native-html-parser` : Parser HTML additionnel
- `tsc-alias` : RÃ©solution des alias TypeScript

### DÃ©pendances de dÃ©veloppement
- `@types/node` : Types Node.js pour TypeScript
- `typescript` : Compilateur TypeScript

## âš¡ Conseils de performance

1. **Utilisez la pagination intelligemment** : Ne rÃ©cupÃ©rez que le nombre de pages nÃ©cessaire
2. **GÃ©rez les proxies efficacement** : Utilisez une rotation de proxies pour Ã©viter les blocages
3. **ImplÃ©mentez la gestion d'erreurs** : Toujours wrapper les appels dans try/catch
4. **Respectez les limites** : Ajoutez des dÃ©lais entre les requÃªtes pour Ã©viter la dÃ©tection

## ğŸš¨ Limitations et bonnes pratiques

- **Respect des conditions d'utilisation** : Assurez-vous de respecter les ToS de Twitter/X
- **Limitation de dÃ©bit** : Le package inclut des protections, mais soyez raisonnable
- **Proxies** : Utilisez des proxies de qualitÃ© pour Ã©viter les blocages
- **Gestion d'erreurs** : ImplÃ©mentez toujours une logique de retry robuste

## ğŸ” DÃ©pannage

### Erreurs communes

1. **Proxy non accessible** : VÃ©rifiez la configuration et la validitÃ© des proxies
2. **Rate limiting** : Augmentez les dÃ©lais entre les requÃªtes
3. **Nitter indisponible** : Le service peut Ãªtre temporairement inaccessible
4. **Utilisateur introuvable** : VÃ©rifiez que le nom d'utilisateur existe

### Solutions

- Activez les logs pour dÃ©boguer
- Testez avec diffÃ©rentes instances Nitter
- Utilisez des proxies rotatifs
- ImplÃ©mentez une logique de retry avec backoff exponentiel

## ğŸ“„ Licence

Ce projet est sous licence MIT. Voir le fichier LICENSE pour plus de dÃ©tails.

## ğŸ¤ Contribution

Les contributions sont les bienvenues ! N'hÃ©sitez pas Ã  ouvrir des issues ou soumettre des pull requests.

---

*Documentation gÃ©nÃ©rÃ©e pour nitter-scraper-v2 v1.1.1* 